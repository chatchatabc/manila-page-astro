---
import Layout from "@layouts/layout.astro";
import { Img } from "astro-imagetools/components";
import { getCollection } from "astro:content";

const placesCollection = await getCollection("places");
---

<Layout>
  <section class="bg-white relative">
    <div class="h-[80vh] overflow-hidden">
      <Img
        src="/images/places/rizal-park.png"
        alt="Rizal Park"
        objectPosition="50% 100%"
      />
    </div>
    <div class="absolute bottom-0 pb-[10%] w-full">
      <div class="absolute w-full h-full">
        <div
          class="absolute left-0 w-1/2 h-full bg-blue-900 opacity-70 triangle-side-clip"
        >
        </div>
        <div
          class="absolute left-1/2 -translate-x-1/2 bottom-0 w-full h-1/2 bg-background triangle-clip"
        >
        </div>
        <div
          class="absolute right-0 w-1/2 h-full bg-blue-900 opacity-70 triangle-side-clip rotate-180"
        >
        </div>
      </div>
    </div>
  </section>

  <section class="container mx-auto px-4 space-y-12 lg:px-8">
    <header class="lg:-mt-8">
      <h1
        class="text-center font-alex text-5xl relative md:text-6xl lg:text-7xl"
      >
        Manila Travel Guide
      </h1>
    </header>

    <!-- Museums Section -->
    <section>
      <!-- Section Title -->
      <header>
        <h2 class="text-5xl font-alex text-center">Featured Places</h2>
        <p class="text-gray-900 text-center">
          Lorem ipsum dolor sit amet consectetur adipisicing elit.
        </p>
      </header>

      <!-- Items -->
      <ul class="flex-wrap justify-center mt-4 md:flex">
        {
          [...placesCollection]
            .filter((place) => place.data.categories.includes("museum"))
            .splice(0, 3)
            .map((place) => {
              return (
                <li class="p-1 w-full flex-shrink-0 md:w-1/2 lg:w-1/3 xl:p-2">
                  <figure class="bg-white rounded-xl">
                    <div class="relative pb-[65%] overflow-hidden rounded-xl">
                      <div class="absolute top-0 left-0 w-full h-full">
                        <Img
                          src={place.data.featuredImage}
                          alt={place.data.title}
                        />
                      </div>

                      <div class="absolute bottom-0 w-full text-white pb-1 pt-4 px-2 bg-gradient-to-t from-black to-transparent bg-opacity-50">
                        <h2 class="text-3xl font-alex line-clamp-2">
                          {place.data.title}
                        </h2>
                      </div>
                    </div>
                    <figcaption class="relative p-4">
                      <p class="line-clamp-4">{place.data.summary}</p>
                      <button class="mt-4 bg-blue-500 text-white mx-auto block px-4 py-1 rounded-md">
                        View more
                      </button>
                    </figcaption>
                  </figure>
                </li>
              );
            })
        }
      </ul>
    </section>

    <!-- Museums Section -->
    <section>
      <!-- Section Title -->
      <header>
        <h2 class="text-5xl font-alex text-center">Museums for All Ages</h2>
        <p class="text-gray-900 text-center">
          Lorem ipsum dolor sit amet consectetur adipisicing elit.
        </p>
      </header>

      <!-- Items -->
      <ul class="flex-wrap justify-center mt-4 md:flex">
        {
          [...placesCollection].splice(0, 4).map((place) => {
            return (
              <li class="p-1 w-full flex-shrink-0 md:w-1/2 lg:w-1/4 xl:p-2">
                <figure class="relative bg-white rounded-xl overflow-hidden">
                  <div class="relative pb-[65%]">
                    <div class="absolute top-0 left-0 w-full h-full">
                      <Img
                        src={place.data.featuredImage}
                        alt={place.data.title}
                      />
                    </div>
                  </div>
                  <figcaption>
                    <div class="absolute bottom-0 w-full text-white pb-1 pt-4 px-2 bg-gradient-to-t from-black to-transparent">
                      <h2 class="text-3xl font-alex line-clamp-2">
                        {place.data.title}
                      </h2>
                    </div>
                  </figcaption>
                </figure>
              </li>
            );
          })
        }
      </ul>
    </section>

    <!-- Intramuros Section -->
    <section class="hidden">
      <!-- Section Title -->
      <header>
        <h2 class="text-5xl font-alex text-center">
          Rich History of Intramuros
        </h2>
      </header>

      <!-- Items -->
      <ul class="flex-wrap justify-center md:flex">
        {
          [...placesCollection].splice(0, 4).map((place) => {
            return (
              <li class="p-1 w-full flex-shrink-0 md:w-1/2 lg:w-1/4 xl:p-2">
                <figure class="relative bg-white rounded-xl overflow-hidden">
                  <div class="relative pb-[65%]">
                    <div class="absolute top-0 left-0 w-full h-full">
                      <Img
                        src={place.data.featuredImage}
                        alt={place.data.title}
                      />
                    </div>
                  </div>
                  <figcaption>
                    <div class="absolute bottom-0 w-full text-white pb-1 pt-4 px-2 bg-gradient-to-t from-black to-transparent">
                      <h2 class="text-3xl font-alex line-clamp-2">
                        {place.data.title}
                      </h2>
                    </div>
                  </figcaption>
                </figure>
              </li>
            );
          })
        }
      </ul>
    </section>
  </section>
</Layout>

---
import { Picture } from "astro-imagetools/components";

const links = [
  // { href: "/", name: "Home" },
  {
    href: "/places",
    name: "Places to Visit",
  },
  {
    href: "/events",
    name: "Events & Festivals",
  },
  {
    href: "/foods-and-drinks",
    name: "Food & Drink",
  },
  {
    href: "/trips",
    name: "Day Trips",
  },
];
---

<header
  data-navbar
  class="z-[500] fixed bg-opacity-100 top-0 w-screen group lg:p-8"
>
  <!-- <div
    class="bg-gradient-to-b from-white to-transparent absolute h-full w-full opacity-50 pointer-events-none"
  >
  </div> -->
  <!-- <div
    class="bg-primary absolute h-full w-full origin-top opacity-50 backdrop-blur-3xl duration-500"
  >
  </div> -->
  <div class="container mx-auto px-4 relative z-[1] lg:px-8">
    <!-- Desktop navbar -->
    <nav class="hidden justify-between items-center flex-wrap lg:flex">
      <a class="text-4xl font-bold text-red-700" href="/">
        <span class="text-blue-700">Manila</span><span class="text-yellow-500"
          >.</span
        >Page
      </a>

      <ul class="flex justify-center">
        {
          links.map((link) => {
            return (
              <li>
                <a
                  class="block py-2 px-4 uppercase duration-300 font-bold hover:text-blue-500"
                  href={link.href}
                >
                  {link.name}
                </a>
              </li>
            );
          })
        }
      </ul>
    </nav>

    <!-- Mobile Navbar -->
    <div class="flex items-center justify-between">
      <a class="py-2 lg:hidden" href="/">
        <img class="w-48" src="/images/logo3.png" alt="logo" />
      </a>
      <button class="lg:hidden">
        <svg
          class="h-6 w-6"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>

      <!-- Mobile Nav menu bg -->
      <div
        id="mobile-nav-menu-bg"
        class="fixed h-full w-full top-0 left-0 pointer-events-none opacity-30 z-[9] lg:hidden"
      >
      </div>

      <!-- Mobile Nav Menu -->
      <nav
        id="mobile-nav-menu"
        class="fixed z-10 transition bg-white top-0 left-0 -translate-x-full h-full w-3/4 pt-4"
      >
        <ul>
          {
            links.map((link) => {
              return (
                <li>
                  <a class="block py-2 px-4" href={link.href}>
                    {link.name}
                  </a>
                </li>
              );
            })
          }
        </ul>
      </nav>
    </div>
  </div>
</header>

<script>
  const navbar = document.querySelector("[data-navbar]")!;
  const nav = document.querySelector("#mobile-nav-menu")!;
  const bg = document.querySelector("#mobile-nav-menu-bg")!;
  const button = document.querySelector("button")!;
  const links = document.querySelectorAll("a")!;

  const navOpen = () => {
    nav.classList.remove("-translate-x-full");
    nav.classList.add("translate-x-0");
    bg.classList.add("bg-black");
    bg.classList.remove("pointer-events-none");
  };
  const navClose = () => {
    nav.classList.remove("translate-x-0");
    nav.classList.add("-translate-x-full");
    bg.classList.remove("bg-black");
    bg.classList.add("pointer-events-none");
  };
  button.addEventListener("click", () => {
    if (nav.classList.contains("-translate-x-full")) {
      navOpen();
    } else {
      navClose();
    }
  });

  bg.addEventListener("click", () => {
    navClose();
  });

  links.forEach((link) => {
    link.addEventListener("click", () => {
      navClose();
    });
  });

  window.addEventListener("scroll", () => {
    if (window.scrollY > 0) {
      navbar.classList.add("bg-primary");
      navbar.classList.add("duration-500");
      navbar.classList.add("shadow-2xl");
      navbar.classList.add("lg:p-4");
      navbar.classList.remove("lg:p-8");
      navbar.classList.remove("duration-150");
    } else {
      navbar.classList.remove("bg-primary");
      navbar.classList.remove("duration-500");
      navbar.classList.remove("shadow-2xl");
      navbar.classList.remove("lg:p-4");
      navbar.classList.add("lg:p-8");
      navbar.classList.add("duration-150");
    }
  });
</script>
